<!DOCTYPE html>
<html lang="en" dir="ltr">

    <head>

        <meta charset="utf-8" />
        <title>Task 6</title>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script type="application/javascript">
            $(document).ready(function() {
                function createFamilyTree() {
                    $('body').append('<table></table>');
                    $('table').append('<thead></thead>', '<tbody></tbody>');

                    $('thead').append('<tr></tr>');
                    $('thead > tr').append('<th></th>', '<th></th>');
                    $('thead > tr > th:nth-child(1)').text('Firstname');
                    $('thead > tr > th:nth-child(2)').text('Lastname');
                };

                function addNewMember(firstName, lastName, position) {
                    const newmember = `
                        <tr>
                            <td>
                                ${firstName}
                            </td>
                            <td>
                                ${lastName}
                            </td>
                            <td>
                                (x)
                            </td>
                        </tr>
                        `;

                    if (position === 'before') {
                        $('tbody').prepend(newmember);
                        $('tbody > tr > td:nth-child(3)').click(function() {
                            $(this).parent().remove()
                        });
                        $('tbody > tr > td:nth-child(3)').css('background-color', 'orange');
                    }

                    else {
                        $('tbody').append(newmember);
                        $('tbody > tr > td:nth-child(3)').click(function() {
                            $(this).parent().remove()
                        });
                        $('tbody > tr > td:nth-child(3)').css('background-color', 'orange');
                    }
                };

                    function createForm() {
                        $('table').before(
                            `<input type="text"></input>`,
                            `<input type="text"></input>`,
                            `<select><option value="before">Before</option><option value="after">After</option></select>`,
                            '<input type="submit"></input>'
                        );
                        
                        $('input:last').click(function() {
                            addNewMember(
                                $('input:nth-of-type(1)').val(),
                                $('input:nth-of-type(2)').val(),
                                $('select').val()
                            );
                        });
                    };

                createFamilyTree();
                createForm();
            });
        </script>
    </head>

    <body>
        
    </body>

</html>